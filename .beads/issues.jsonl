{"id":"oauth.do-01a","title":"Add automated key rotation","description":"SigningKeyManager.rotateKey() exists but is never called. Keys generated once and used indefinitely. Implement DO alarm-based rotation (e.g., 90 days). Old keys remain in JWKS during grace period.","status":"open","priority":2,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:49.881276-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:49.881276-06:00"}
{"id":"oauth.do-085","title":"Acceptance Criteria","description":"- Tests for JWT verification with valid/invalid/expired tokens","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.746932-06:00","updated_at":"2026-02-01T15:40:05.642525-06:00","closed_at":"2026-02-01T15:40:05.642525-06:00","close_reason":"Closed"}
{"id":"oauth.do-0od","title":"Acceptance Criteria","description":"- README example correctly demonstrates the API","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.75418-06:00","updated_at":"2026-02-01T15:40:03.970279-06:00","closed_at":"2026-02-01T15:40:03.970279-06:00","close_reason":"Closed"}
{"id":"oauth.do-107","title":"TDD Subtasks","description":"- [ ] RED: Write test that request from unknown origin gets no CORS headers","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.743027-06:00","updated_at":"2026-02-01T15:40:06.470921-06:00","closed_at":"2026-02-01T15:40:06.470921-06:00","close_reason":"Closed"}
{"id":"oauth.do-11s","title":"Acceptance Criteria","description":"- At least 2 working example projects","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.754731-06:00","updated_at":"2026-02-01T15:40:03.859781-06:00","closed_at":"2026-02-01T15:40:03.859781-06:00","close_reason":"Closed"}
{"id":"oauth.do-1fj","title":"TDD Subtasks","description":"- [ ] RED: Test valid JWT returns valid=true with correct user","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.747303-06:00","updated_at":"2026-02-01T15:40:05.516408-06:00","closed_at":"2026-02-01T15:40:05.516408-06:00","close_reason":"Closed"}
{"id":"oauth.do-1gx","title":"Document OAuth 2.1 server deployment","description":"The @dotdo/oauth server (most differentiated piece) has no deployment docs. README only covers SDK. Need deployment guide, example wrangler config, architecture diagram.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:18.586032-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:18.586032-06:00"}
{"id":"oauth.do-1y9","title":"Acceptance Criteria","description":"- Invalid token results cached briefly (e.g., 30 seconds)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.756504-06:00","updated_at":"2026-02-01T15:40:03.414808-06:00","closed_at":"2026-02-01T15:40:03.414808-06:00","close_reason":"Closed"}
{"id":"oauth.do-2rc","title":"Acceptance Criteria","description":"- `/introspect` verifies JWT signature against JWKS before returning `active: true`","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.731974-06:00","updated_at":"2026-02-01T15:40:07.312478-06:00","closed_at":"2026-02-01T15:40:07.312478-06:00","close_reason":"Closed"}
{"id":"oauth.do-34d","title":"Remove duplicated API key validation (3 implementations)","description":"API key validation implemented 3 times: workers/oauth/index.ts:162 (HTTP), workers/oauth/index.ts:294 (RPC), workers/auth/index.ts (service binding). Extract to single shared function.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.152041-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.152041-06:00"}
{"id":"oauth.do-3t0","title":"Acceptance Criteria","description":"- Auth worker CORS restricts to known .do origins","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.742195-06:00","updated_at":"2026-02-01T15:40:06.590377-06:00","closed_at":"2026-02-01T15:40:06.590377-06:00","close_reason":"Closed"}
{"id":"oauth.do-45j","title":"TDD Subtasks","description":"- [ ] RED: Write test that crafts a JWT with valid claims but wrong signature, asserts `active: false`","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.738161-06:00","updated_at":"2026-02-01T15:40:07.198437-06:00","closed_at":"2026-02-01T15:40:07.198437-06:00","close_reason":"Closed"}
{"id":"oauth.do-4ff","title":"Fix missing @dotdo/types dependency (36 type errors)","description":"src/types.ts has 8 hard imports from @dotdo/types/auth which is optional peerDependency but imported unconditionally, causing 36 of 37 type errors. Either install as regular dep or make imports conditional.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:18.296598-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:18.296598-06:00"}
{"id":"oauth.do-4zg","title":"Add JWT signing tests (jwt-signing.ts has ZERO tests)","description":"core/src/jwt-signing.ts implements all token signing, key generation, serialization, and JWKS export with ZERO tests. TDD: RED - test generateSigningKey produces valid RSA-2048; RED - test signAccessToken produces verifiable tokens; RED - test serialize/deserialize round-trip; RED - test exportPublicKeyToJWKS; RED - test SigningKeyManager rotation; RED - test cross-key rejection.","status":"open","priority":0,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:38:44.886488-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:38:44.886488-06:00"}
{"id":"oauth.do-55r","title":"Acceptance Criteria","description":"- CRUD tests for both storage implementations","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.747643-06:00","updated_at":"2026-02-01T15:40:05.40131-06:00","closed_at":"2026-02-01T15:40:05.40131-06:00","close_reason":"Closed"}
{"id":"oauth.do-5oh","title":"Authenticate /register endpoint (open to abuse)","description":"Dynamic client registration at core/src/server.ts:1079-1133 has no auth or rate limiting. Anyone can create unlimited OAuth clients with arbitrary redirect URIs. TDD: RED - test POST /register without auth returns 401; RED - test with admin token succeeds; GREEN - add auth requirement.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:16.495394-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:16.495394-06:00"}
{"id":"oauth.do-5qz","title":"TDD Subtasks","description":"- [ ] RED: Write storage interface conformance tests that run against all implementations","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.748014-06:00","updated_at":"2026-02-01T15:40:05.290744-06:00","closed_at":"2026-02-01T15:40:05.290744-06:00","close_reason":"Closed"}
{"id":"oauth.do-6gt","title":"Acceptance Criteria","description":"- Release pipeline fails if tests fail","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.749509-06:00","updated_at":"2026-02-01T15:40:05.071724-06:00","closed_at":"2026-02-01T15:40:05.071724-06:00","close_reason":"Closed"}
{"id":"oauth.do-6qy","title":"TDD Subtasks","description":"- [ ] RED: Test POST /device/code returns valid response","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.752758-06:00","updated_at":"2026-02-01T15:40:04.191452-06:00","closed_at":"2026-02-01T15:40:04.191452-06:00","close_reason":"Closed"}
{"id":"oauth.do-6uq","title":"Add working examples to examples/ directory","description":"examples/ is empty. Need: 1) protect Hono API with oauth.do, 2) deploy your own OAuth server. Both should run with minimal setup.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.016369-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.016369-06:00"}
{"id":"oauth.do-76q","title":"Replace any types in SDK code (7 instances)","description":"7 instances of 'any' in: src/auth.ts:13-14 (double as any), src/auth.ts:68 ([key:string]:any), src/auth.ts:159,162 (env as any), src/utils.ts:13 (globalThis as any), src/storage.ts:44-45,92. Replace with proper types or unknown.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:49.748007-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:49.748007-06:00"}
{"id":"oauth.do-7ih","title":"Acceptance Criteria","description":"- `/.well-known/jwks.json` returns all keys from `signingKeyManager.getAllKeys()`","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.744586-06:00","updated_at":"2026-02-01T15:40:06.122473-06:00","closed_at":"2026-02-01T15:40:06.122473-06:00","close_reason":"Closed"}
{"id":"oauth.do-8bl","title":"Add auth worker tests (ZERO test coverage)","description":"workers/auth/index.ts (17KB) has ZERO tests. Handles JWT verification, API key verification, cookie sessions, caching, and AuthRPC. TDD: RED - test valid/expired/invalid JWT; RED - test API key (sk_); RED - test admin token; RED - test authenticate() with header/cookie; RED - test cache behavior.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:17.662502-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:17.662502-06:00"}
{"id":"oauth.do-8g8","title":"Fix require condition pointing to ESM in package.json","description":"package.json exports require condition points to .js files but tsup only generates ESM. Breaks CJS consumers. Either remove require condition or add CJS output to tsup.","status":"open","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.289408-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.289408-06:00"}
{"id":"oauth.do-99g","title":"Acceptance Criteria","description":"- Kid generated from public key hash or crypto random UUID","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.757877-06:00","updated_at":"2026-02-01T15:40:02.96942-06:00","closed_at":"2026-02-01T15:40:02.96942-06:00","close_reason":"Closed"}
{"id":"oauth.do-9sr","title":"Expose all signing keys in JWKS endpoint","description":"JWKS at core/src/server.ts:335-361 only returns current key. During rotation, tokens signed with previous key fail verification. SigningKeyManager.getAllKeys() exists but unused. TDD: RED - test rotate key then verify JWKS has both; GREEN - use signingKeyManager.toJWKS().","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:17.477087-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:17.477087-06:00"}
{"id":"oauth.do-9zw","title":"Acceptance Criteria","description":"- KV binding removed from wrangler.toml","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.757541-06:00","updated_at":"2026-02-01T15:40:03.085078-06:00","closed_at":"2026-02-01T15:40:03.085078-06:00","close_reason":"Closed"}
{"id":"oauth.do-a3t","title":"Token revocation should invalidate auth cache","description":"When token revoked via /revoke, auth worker 5-min cache still serves old valid result. No mechanism for proactive invalidation. Consider RPC from oauth to auth worker on revoke.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.56187-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.56187-06:00"}
{"id":"oauth.do-agn","title":"Add allowlist for X-Issuer header","description":"getEffectiveIssuer() at core/src/server.ts:165-179 accepts any valid URL from X-Issuer header. Attacker can mint tokens with arbitrary iss claims. TDD: RED - test unauthorized X-Issuer falls back to default; RED - test allowed X-Issuer is used; GREEN - add allowedIssuers config and validate.","status":"open","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:38:44.555924-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:38:44.555924-06:00"}
{"id":"oauth.do-ajj","title":"Acceptance Criteria","description":"- Full test coverage for `signAccessToken`, `generateSigningKey`, `serializeSigningKey`, `deserializeSigningKey`, `exportPublicKeyToJWKS`, `SigningKeyManager`","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.745369-06:00","updated_at":"2026-02-01T15:40:05.886323-06:00","closed_at":"2026-02-01T15:40:05.886323-06:00","close_reason":"Closed"}
{"id":"oauth.do-b2e","title":"TDD Subtasks","description":"- [ ] RED: Write test that rotates key and verifies JWKS contains both old and new keys","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.74501-06:00","updated_at":"2026-02-01T15:40:06.009365-06:00","closed_at":"2026-02-01T15:40:06.009365-06:00","close_reason":"Closed"}
{"id":"oauth.do-b8a","title":"Stop repurposing codeChallenge/state fields for token storage","description":"At core/src/server.ts:866-876, one-time exchange stores JWT in codeChallenge and refresh token in state. Semantic abuse risks data leakage if auth code records are logged. Create dedicated storage or separate method.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:17.215389-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:17.215389-06:00"}
{"id":"oauth.do-c1t","title":"Harden for Release","description":"Critical fixes and improvements needed before npm publish","status":"open","priority":2,"issue_type":"epic","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:24:37.867616-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T08:46:52.718792-06:00","close_reason":"Closed","external_ref":"gh-1"}
{"id":"oauth.do-c1t.1","title":"RED: Fix CLI auth() calls to use getUser()","description":"cli.ts lines 173, 237, 304, 332 call auth(token) but should call getUser(token)","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:05.756934-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T08:46:52.719544-06:00","close_reason":"Closed","external_ref":"gh-2","labels":["critical","red","tdd"],"dependencies":[{"issue_id":"oauth.do-c1t.1","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:05.757825-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.10","title":"GREEN: Add React component tests","description":"Add tests for OAuthDoProvider, useAuth, SignInButton, SignOutButton","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.908082-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:37:54.239965-06:00","closed_at":"2026-01-23T10:37:54.239965-06:00","close_reason":"Closed","labels":["green","tdd","testing"],"dependencies":[{"issue_id":"oauth.do-c1t.10","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.908677-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.2","title":"GREEN: Add Hono middleware tests","description":"Security-critical JWT verification code is untested. Add tests for auth(), requireAuth(), apiKey(), combined()","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:05.883707-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:34:54.141445-06:00","closed_at":"2026-01-23T10:34:54.141445-06:00","close_reason":"Closed","labels":["green","tdd","testing"],"dependencies":[{"issue_id":"oauth.do-c1t.2","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:05.884287-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.3","title":"RED: Fix SignOutButton to use signOut()","description":"SignOutButton directly clears localStorage instead of calling signOut() from useAuth","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.012706-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:27:10.360165-06:00","closed_at":"2026-01-23T10:27:10.360165-06:00","close_reason":"Closed","labels":["red","tdd"],"dependencies":[{"issue_id":"oauth.do-c1t.3","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.013551-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.4","title":"GREEN: Add device flow tests","description":"Add tests for WorkOS device authorization flow in device.ts","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.139557-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T08:46:52.72-06:00","close_reason":"Closed","external_ref":"gh-6","labels":["green","tdd","testing"],"dependencies":[{"issue_id":"oauth.do-c1t.4","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.140191-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.5","title":"GREEN: Add login module tests","description":"Add tests for token refresh logic and singleton pattern in login.ts","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.265311-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T08:46:52.720434-06:00","close_reason":"Closed","external_ref":"gh-7","labels":["green","tdd","testing"],"dependencies":[{"issue_id":"oauth.do-c1t.5","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.265949-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.6","title":"REFACTOR: Extract shared getEnv utility","description":"getEnv() is duplicated in auth.ts, config.ts, storage.ts - extract to shared module","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.408492-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T08:46:52.720826-06:00","close_reason":"Closed","external_ref":"gh-8","labels":["refactor","tdd"],"dependencies":[{"issue_id":"oauth.do-c1t.6","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.409096-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.7","title":"REFACTOR: Add types export to package.json","description":"Add ./types export for type-only imports","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.534176-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:32:08.971145-06:00","closed_at":"2026-01-23T10:32:08.971145-06:00","close_reason":"Closed","labels":["refactor","tdd"],"dependencies":[{"issue_id":"oauth.do-c1t.7","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.534923-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.8","title":"GREEN: Add CI/CD GitHub Actions","description":"Add .github/workflows/test.yml for automated testing on PR/push","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.657337-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-23T10:32:09.056574-06:00","closed_at":"2026-01-23T10:32:09.056574-06:00","close_reason":"Closed","labels":["ci","green","tdd"],"dependencies":[{"issue_id":"oauth.do-c1t.8","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.65792-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-c1t.9","title":"REFACTOR: Update README documentation","description":"Add intro section, Getting Started guide, document GitHub Device Flow, document duckdb-auth","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-23T10:25:06.783612-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T08:46:52.721248-06:00","close_reason":"Closed","external_ref":"gh-11","labels":["docs","refactor","tdd"],"dependencies":[{"issue_id":"oauth.do-c1t.9","depends_on_id":"oauth.do-c1t","type":"parent-child","created_at":"2026-01-23T10:25:06.784205-06:00","created_by":"Nathan Clevenger"}]}
{"id":"oauth.do-car","title":"Move Node-only exports out of main entry point","description":"Main export (oauth.do) exports FileTokenStorage, SecureFileTokenStorage, KeychainTokenStorage which require Node.js, breaking the browser-safe contract. Should only be in oauth.do/node.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:18.879246-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:18.879246-06:00"}
{"id":"oauth.do-cih","title":"Acceptance Criteria","description":"- Single implementation shared across all paths","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.755165-06:00","updated_at":"2026-02-01T15:40:03.753149-06:00","closed_at":"2026-02-01T15:40:03.753149-06:00","close_reason":"Closed"}
{"id":"oauth.do-die","title":"Acceptance Criteria","description":"- `/invalidate` requires admin auth or the token itself as proof of ownership","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.743459-06:00","updated_at":"2026-02-01T15:40:06.350421-06:00","closed_at":"2026-02-01T15:40:06.350421-06:00","close_reason":"Closed"}
{"id":"oauth.do-e88","title":"Add production storage backend tests","description":"DOSQLiteStorage and CollectionsOAuthStorage have ZERO tests. Only MemoryOAuthStorage tested. TDD: RED - write storage conformance tests; GREEN - verify all 3 implementations pass. Cover CRUD, auth code single-use, token revocation, SQL injection resistance.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:17.845696-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:17.845696-06:00"}
{"id":"oauth.do-f5v","title":"Acceptance Criteria","description":"- All `any` types replaced with proper types or `unknown` with type guards","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.751673-06:00","updated_at":"2026-02-01T15:40:04.520448-06:00","closed_at":"2026-02-01T15:40:04.520448-06:00","close_reason":"Closed"}
{"id":"oauth.do-faa","title":"Consolidate AuthUser type definitions (6 duplicates)","description":"AuthUser defined in 6 places with subtle differences (org vs organizationId, image field). Located in: src/hono.ts, src/itty.ts, src/rpc.ts, workers/auth/src/types.ts, workers/auth/index.ts, types/mdxui-auth.d.ts. Create single canonical type.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:49.337618-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:49.337618-06:00"}
{"id":"oauth.do-fji","title":"Acceptance Criteria","description":"- Exchange codes use dedicated storage fields or a separate storage method","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.744194-06:00","updated_at":"2026-02-01T15:40:06.237612-06:00","closed_at":"2026-02-01T15:40:06.237612-06:00","close_reason":"Closed"}
{"id":"oauth.do-g5b","title":"Align root tsconfig with core strict settings","description":"Root tsconfig missing 6 strict settings that core has: noUncheckedIndexedAccess, useUnknownInCatchVariables, noUnusedLocals, noUnusedParameters, noFallthroughCasesInSwitch, exactOptionalPropertyTypes.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:49.599544-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:49.599544-06:00"}
{"id":"oauth.do-gr6","title":"Acceptance Criteria","description":"- Node-only storage classes only exported from `oauth.do/node`","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.755795-06:00","updated_at":"2026-02-01T15:40:03.638754-06:00","closed_at":"2026-02-01T15:40:03.638754-06:00","close_reason":"Closed"}
{"id":"oauth.do-h20","title":"Add verifyJWT function for server-side token validation","description":"Add verifyJWT function to @dotdo/oauth that bashx.do and other projects expect. Should support JWKS URL for key fetching and standard JWT claims validation. Export from oauth.do/server subpath.","status":"open","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-24T12:06:53.914899-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-24T17:29:47.78282-06:00","external_ref":"gh-12"}
{"id":"oauth.do-hh3","title":"Verify JWT signatures in introspection endpoint","description":"The /introspect endpoint at core/src/server.ts:383-416 decodes JWTs and returns active:true without verifying the cryptographic signature. An attacker can craft a JWT with arbitrary claims and introspection will report it as active. TDD: RED - test forged JWT returns active:false; RED - test valid signed JWT returns active:true; GREEN - implement signature verification using signingKeyManager.","status":"open","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:38:44.308986-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:38:44.308986-06:00"}
{"id":"oauth.do-hl4","title":"Cache negative token verification results","description":"workers/auth/index.ts:296-299 only caches valid results. Invalid tokens force expensive verification every request (DoS vector). Cache negative results briefly (30s).","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.43003-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.43003-06:00"}
{"id":"oauth.do-hmi","title":"Fix release pipeline to fail on test failures","description":".github/workflows/release.yml line 42 uses 'pnpm test || true', meaning test failures do NOT block releases. Change to 'pnpm test'. Also add coverage threshold enforcement in CI.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:18.138892-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:18.138892-06:00"}
{"id":"oauth.do-j2k","title":"Acceptance Criteria","description":"- Both types modeled as `| { success: true; client: OAuthClient } | { success: false; error: string; ... }`","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.750958-06:00","updated_at":"2026-02-01T15:40:04.739021-06:00","closed_at":"2026-02-01T15:40:04.739021-06:00","close_reason":"Closed"}
{"id":"oauth.do-jl2","title":"Fix misleading auth() example in README","description":"README line 16-19 shows 'const { user, token } = await auth()' but auth() returns AuthProvider (a function), not AuthResult.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:18.730303-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:18.730303-06:00"}
{"id":"oauth.do-kcc","title":"Acceptance Criteria","description":"- Either remove `require` condition or add CJS output format to tsup","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.756161-06:00","updated_at":"2026-02-01T15:40:03.527921-06:00","closed_at":"2026-02-01T15:40:03.527921-06:00","close_reason":"Closed"}
{"id":"oauth.do-krs","title":"Acceptance Criteria","description":"- Token revocation triggers cache invalidation on auth worker","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.756881-06:00","updated_at":"2026-02-01T15:40:03.305562-06:00","closed_at":"2026-02-01T15:40:03.305562-06:00","close_reason":"Closed"}
{"id":"oauth.do-l0o","title":"Remove legacy KV namespace binding","description":"workers/oauth/wrangler.toml:38 still declares legacy KV namespace OAUTH_STATE with comment 'can be removed after migration'. Remove binding and any remaining KV references.","status":"open","priority":3,"issue_type":"chore","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.830266-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.830266-06:00"}
{"id":"oauth.do-lkr","title":"Acceptance Criteria","description":"- Single canonical `AuthUser` type in a shared location","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.750606-06:00","updated_at":"2026-02-01T15:40:04.851914-06:00","closed_at":"2026-02-01T15:40:04.851914-06:00","close_reason":"Closed"}
{"id":"oauth.do-lp1","title":"Use cryptographic key ID instead of timestamp","description":"core/src/jwt-signing.ts:86 uses Date.now() for kid. Keys in same millisecond get same kid. Use hash of public key or crypto random UUID.","status":"open","priority":3,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.970165-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.970165-06:00"}
{"id":"oauth.do-neq","title":"Acceptance Criteria","description":"- `/register` requires admin token or valid auth","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.741465-06:00","updated_at":"2026-02-01T15:40:06.824575-06:00","closed_at":"2026-02-01T15:40:06.824575-06:00","close_reason":"Closed"}
{"id":"oauth.do-nv4","title":"Acceptance Criteria","description":"- `POST /device/code` endpoint returns device_code, user_code, verification_uri","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.7524-06:00","updated_at":"2026-02-01T15:40:04.30137-06:00","closed_at":"2026-02-01T15:40:04.30137-06:00","close_reason":"Closed"}
{"id":"oauth.do-pc3","title":"Acceptance Criteria","description":"- X-Issuer only accepts URLs from an explicit allowlist","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.738958-06:00","updated_at":"2026-02-01T15:40:07.076249-06:00","closed_at":"2026-02-01T15:40:07.076249-06:00","close_reason":"Closed"}
{"id":"oauth.do-ppm","title":"Restrict CORS on auth worker","description":"Auth worker at workers/auth/index.ts:310 uses fully open CORS. Combined with cookie-based auth on /me, any website can make credentialed requests. TDD: RED - test unknown origin gets no CORS; RED - test allowed origin gets headers; GREEN - configure CORS with explicit list.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:16.669297-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:16.669297-06:00"}
{"id":"oauth.do-qwi","title":"Remove token from query parameter support","description":"workers/auth/index.ts:317-318,336-337 accepts tokens via query params. Tokens in URLs logged in access logs, browser history, referer headers. Only accept via POST body or Authorization header.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:50.693319-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:50.693319-06:00"}
{"id":"oauth.do-r1d","title":"Authenticate /invalidate endpoint","description":"POST /invalidate at workers/auth/index.ts:366-383 requires no auth. Any attacker who knows a token can invalidate its cache (DoS vector). Require admin auth or token ownership proof.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:16.91023-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:16.91023-06:00"}
{"id":"oauth.do-r8w","title":"TDD Subtasks","description":"- [ ] RED: Test generateSigningKey produces valid RSA-2048 key pair","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.746542-06:00","updated_at":"2026-02-01T15:40:05.76738-06:00","closed_at":"2026-02-01T15:40:05.76738-06:00","close_reason":"Closed"}
{"id":"oauth.do-sqc","title":"Acceptance Criteria","description":"- DO alarm-based rotation schedule (e.g., every 90 days)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.752046-06:00","updated_at":"2026-02-01T15:40:04.412862-06:00","closed_at":"2026-02-01T15:40:04.412862-06:00","close_reason":"Closed"}
{"id":"oauth.do-trq","title":"TDD Subtasks","description":"- [ ] RED: Write test that POST /register without auth returns 401","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.741856-06:00","updated_at":"2026-02-01T15:40:06.70802-06:00","closed_at":"2026-02-01T15:40:06.70802-06:00","close_reason":"Closed"}
{"id":"oauth.do-ufh","title":"TDD Subtasks","description":"- [ ] RED: Test valid access token returns `active: true` with metadata","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.748986-06:00","updated_at":"2026-02-01T15:40:05.181002-06:00","closed_at":"2026-02-01T15:40:05.181002-06:00","close_reason":"Closed"}
{"id":"oauth.do-v5b","title":"Add Device Authorization Grant to @dotdo/oauth server","description":"Server only supports authorization_code and refresh_token. Device Authorization Grant (RFC 8628) needed for MCP where AI clients authenticate. TDD: RED - POST /device/code returns valid response; RED - polling returns authorization_pending; RED - successful auth returns tokens; RED - expired code returns error; GREEN - implement.","status":"open","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:18.440009-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:18.440009-06:00"}
{"id":"oauth.do-v8h","title":"Acceptance Criteria","description":"- Root tsconfig has same strict settings as core","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.751307-06:00","updated_at":"2026-02-01T15:40:04.630728-06:00","closed_at":"2026-02-01T15:40:04.630728-06:00","close_reason":"Closed"}
{"id":"oauth.do-vy9","title":"Acceptance Criteria","description":"- Token verification only accepts tokens via POST body or Authorization header","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.757216-06:00","updated_at":"2026-02-01T15:40:03.195196-06:00","closed_at":"2026-02-01T15:40:03.195196-06:00","close_reason":"Closed"}
{"id":"oauth.do-x4e","title":"Add token introspection tests","description":"The /introspect endpoint is not covered in server.test.ts. TDD: RED - valid token returns active:true; RED - expired returns active:false; RED - revoked returns active:false; RED - unknown returns active:false; GREEN - verify tests pass.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:17.992142-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:17.992142-06:00"}
{"id":"oauth.do-x74","title":"Migrate oauth.do/react to use @mdxui/auth","description":"Replace direct WorkOS AuthKit wrappers with @mdxui/auth package.\n\n## Background\n- oauth.do currently wraps @workos-inc/authkit-react directly in src/react.tsx\n- @mdxui/auth now provides unified auth components used across mdxui\n- Should consume @mdxui/auth instead of duplicating wrappers\n\n## Current implementation (to replace)\nsrc/react.tsx imports from:\n- @workos-inc/widgets (ApiKeys, UsersManagement, UserProfile)\n- @workos-inc/authkit-react (AuthKitProvider, useAuth)\n\nExports own wrappers:\n- OAuthDoProvider\n- useAuth, useOAuthDoConfig\n- SignInButton, SignOutButton\n- ApiKeys, UsersManagement, UserProfile\n\n## New implementation\nReplace with re-exports from @mdxui/auth:\n- IdentityProvider (or wrap with oauth.do config)\n- useAuth (re-export)\n- SignInButton, SignOutButton (re-export)\n- Widget components (re-export)\n\n## Benefits\n- Consistent with mdxui ecosystem\n- Less maintenance burden\n- Access to new auth components (UserMenu, TeamSwitcher, etc.)\n- Vault components will be available via same package","status":"closed","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-25T04:15:16.799515-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-25T04:40:24.019943-06:00","closed_at":"2026-01-25T04:40:24.019943-06:00","close_reason":"Completed: Migrated oauth.do/react to use @mdxui/auth"}
{"id":"oauth.do-y0q","title":"Acceptance Criteria","description":"- Deployment guide for self-hosting the OAuth 2.1 server","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.753542-06:00","updated_at":"2026-02-01T15:40:04.081676-06:00","closed_at":"2026-02-01T15:40:04.081676-06:00","close_reason":"Closed"}
{"id":"oauth.do-yr8","title":"Convert ClientAuthResult and VerifyResult to discriminated unions","description":"ClientAuthResult at core/src/server.ts:1176-1182 and VerifyResult at workers/auth/index.ts:41-46 use boolean flags with optional fields. Leads to non-null assertions (client!). Model as proper discriminated unions.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:39:49.468652-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:39:49.468652-06:00"}
{"id":"oauth.do-yuq","title":"Acceptance Criteria","description":"- Either install `@dotdo/types` as regular dependency or make imports conditional","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.749954-06:00","updated_at":"2026-02-01T15:40:04.960311-06:00","closed_at":"2026-02-01T15:40:04.960311-06:00","close_reason":"Closed"}
{"id":"oauth.do-zei","title":"TDD Subtasks","description":"- [ ] RED: Write test that sends X-Issuer with unauthorized domain, asserts default issuer is used","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T15:38:15.741021-06:00","updated_at":"2026-02-01T15:40:06.95084-06:00","closed_at":"2026-02-01T15:40:06.95084-06:00","close_reason":"Closed"}
